{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search');\nconst gallery = document.querySelector('.gallery');\nconst textInput = document.querySelector('.textInput');\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', onSearchSubmit);\n\nfunction onSearchSubmit(e) {\n  e.preventDefault();\n  const value = e.target.elements.search.value;\n  gallery.innerHTML = '';\n  textInput.value = '';\n  loader.style.display = 'block';\n  fetchData(formQueryUrl(value));\n}\n\nfunction formQueryUrl(v) {\n  const BASE_URL = 'https://pixabay.com/api';\n  const OPTIONS = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: 'true',\n    key: '29710136-0ffe1ca247b000977a61f6ae2',\n  });\n  return `${BASE_URL}/?q=${v}&${OPTIONS.toString()}`;\n}\n\nfunction fetchData(requestData) {\n  fetch(requestData)\n    .then(response => {\n      loader.style.display = 'none';\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FAFAFB',\n          backgroundColor: '#EF4040',\n          position: 'topRight',\n        });\n        return;\n      }\n      const imagesHTML = data.hits.reduce((html, image) => {\n        return html + imageCard(image);\n      }, '');\n\n      gallery.innerHTML = imagesHTML;\n      modal.refresh();\n      \n    })\n    .catch(error => {\n      alert(error.toString());\n    });\n}\n\nfunction imageCard(images) {\n  return `<li>\n        <a href=\"${images.largeImageURL}\">\n          <img src=\"${images.webformatURL}\" alt=\"${images.tags}\">\n        </a>\n        <div class=\"info\">\n          <div class=\"image-info\">\n            <span>Likes</span>\n            <span class=\"image-value\">${images.likes}</span>\n          </div>\n          <div class=\"image-info\">\n            <span>Views</span>\n            <span class=\"image-value\">${images.views}</span>\n          </div>\n          <div class=\"image-info\">\n            <span>Comments</span>\n            <span class=\"image-value\">${images.comments}</span>\n          </div>\n          <div class=\"image-info\">\n            <span>Downloads</span>\n            <span class=\"image-value\">${images.downloads}</span>\n          </div>\n        </div>\n      </li>\n    `;\n}"],"names":["searchForm","gallery","textInput","modal","SimpleLightbox","loader","onSearchSubmit","e","value","fetchData","formQueryUrl","v","BASE_URL","OPTIONS","requestData","response","data","iziToast","imagesHTML","html","image","imageCard","error","images"],"mappings":"6vBAMA,MAAMA,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,SAAS,EAE/CL,EAAW,iBAAiB,SAAUM,CAAc,EAEpD,SAASA,EAAeC,EAAG,CACzBA,EAAE,eAAc,EAChB,MAAMC,EAAQD,EAAE,OAAO,SAAS,OAAO,MACvCN,EAAQ,UAAY,GACpBC,EAAU,MAAQ,GAClBG,EAAO,MAAM,QAAU,QACvBI,EAAUC,EAAaF,CAAK,CAAC,CAC/B,CAEA,SAASE,EAAaC,EAAG,CACvB,MAAMC,EAAW,0BACXC,EAAU,IAAI,gBAAgB,CAClC,YAAa,aACb,WAAY,QACZ,WAAY,OACZ,IAAK,oCACT,CAAG,EACD,MAAO,GAAGD,QAAeD,KAAKE,EAAQ,SAAU,GAClD,CAEA,SAASJ,EAAUK,EAAa,CAC9B,MAAMA,CAAW,EACd,KAAKC,GAAY,CAEhB,GADAV,EAAO,MAAM,QAAU,OACnB,CAACU,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,SAAU,UACpB,CAAS,EACD,MACD,CACD,MAAMC,EAAaF,EAAK,KAAK,OAAO,CAACG,EAAMC,IAClCD,EAAOE,EAAUD,CAAK,EAC5B,EAAE,EAELnB,EAAQ,UAAYiB,EACpBf,EAAM,QAAO,CAEnB,CAAK,EACA,MAAMmB,GAAS,CACd,MAAMA,EAAM,SAAQ,CAAE,CAC5B,CAAK,CACL,CAEA,SAASD,EAAUE,EAAQ,CACzB,MAAO;AAAA,mBACUA,EAAO;AAAA,sBACJA,EAAO,sBAAsBA,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKlBA,EAAO;AAAA;AAAA;AAAA;AAAA,wCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,wCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,wCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,KAK/C"}